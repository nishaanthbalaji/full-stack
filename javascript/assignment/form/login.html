<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="login" />
    <title>login</title>
    <style>
      #page {
        background-image: url(./pexels-anna-shvets-5614119.jpg);
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        height: 1000px;
      }
    </style>
  </head>
  <body>
    <div id="page">
      <h1 style="color: yellow">LOGIN</h1>
      <form action="#" id="login">
        <p>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="enter the email"
          />
        </p>
        <p>
          <input
            type="password"
            id="password"
            name="password"
            placeholder="enter the password"
          />
        </p>

        <p>
          <input type="submit" value="submit" id="sigin" class="sign" />
          <input type="reset" value="clear " id="clear" />
        </p>
        <p style="color: yellow">
          NOT YET registered<a href="./register.html">click here to register</a>
        </p>
      </form>
    </div>
    <script>
      let form = document.querySelector("#login");
      let email = form.elements[0];
      let password = form.elements[1];
      let sigin = document.querySelector(".sign");
      //  console.log(sigin);
      sigin.addEventListener("click", (e) => {
        e.preventDefault();
        let alluser = Object.entries(localStorage);
        console.log(alluser);
        let user = alluser.find(
          (ele) => JSON.parse(ele[1]).email === email.value

          // (ele) => JSON.parse(ele[1]).email.includes(email.value)
        );

        console.log(user);
        let userObj = JSON.parse(user[1]);
        console.log(userObj);
        sessionStorage.setItem(user[0], user[1]);
        window.location.href = `./profile.html?id=${userObj.id}`;
      });
    </script>
  </body>
</html>
